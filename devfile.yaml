schemaVersion: 2.1.0
metadata:
  name: nodejs-web-app
attributes:
  controller.devfile.io/storage-type: ephemeral
components:
  - name: tools
    container:
      image: quay.io/devfile/universal-developer-image:ubi8-0e189d9
      endpoints:
        - exposure: public
          name: nodejs
          protocol: http
          targetPort: 3000
      memoryLimit: 1G
      mountSources: true
    attributes:
      controller.devfile.io/merge-contribution: true

commands:
  - id: test-command-env-var
    exec:
      label: "Test Command Env Vars"
      component: tools
      commandLine: >-
        echo "Hello $USER" && 
        echo "The Project Dir: ${PROJECT_DIR}"
      env:
        - name: USER
          value: Roman
        - name: PROJECT_DIR
          value: /projects/web-nodejs-sample
  - id: test-component-env-var
    exec:
      label: "Test Component Env Var"
      component: tools
      commandLine: >-
        echo "Hello ${USER}" && 
        echo "The KUBERNETES SERVICE HOST is ${KUBERNETES_SERVICE_HOST}"
      env:
        - name: USER
          value: Roman
  